"use strict";(self.webpackChunkindiaohyes=self.webpackChunkindiaohyes||[]).push([[510],{1338:function(e,t,a){a.r(t);var r=a(6259),n=a(5861),l=a(7757),c=a.n(l),s=a(5444),o=a(7294),i=a(6263),m=a(4877);function d(e){return new Promise((function(t){var a=document.createElement("script");a.src=e,a.onload=function(){t(!0)},a.onerror=function(){t(!1)},document.body.appendChild(a)}))}t.default=function(){var e=(0,o.useState)(),t=e[0],a=e[1],l=(0,o.useState)(),u=l[0],p=l[1],f=(0,o.useState)(),b=f[0],g=f[1],x=(0,o.useState)(),h=(x[0],x[1]),y=(0,o.useState)();y[0],y[1];function E(){return(E=(0,n.Z)(c().mark((function e(){var t,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("https://checkout.razorpay.com/v1/checkout.js");case 2:if(e.sent){e.next=6;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 6:return e.next=8,fetch("http://localhost:3000/api/order",{method:"POST"}).then((function(e){return e.json()}));case 8:t=e.sent,console.log(t),a={key:"rzp_test_riR65g07X6XqfK",currency:t.currency,amount:t.amount,order_id:t.o_id,name:"Donation",description:"Thank you for nothing. Please give us some money",image:"",handler:function(e){null!=e.razorpay_payment_id?i.Z.post("/placeorder/place-order",{payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature,oder_id:t.o_id}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)})):alert("payment not succesfull"),alert(e.razorpay_signature),alert(e.razorpay_payment_id),alert(t.o_id)},prefill:{name:b.name,email:b.email,phone_number:b.phone}},new window.Razorpay(a).open();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.useEffect)((function(){if(!(0,m.ZP)())return(0,s.c4)("/login");i.Z.get("/users/cart").then((function(e){a(e.data.data.cart)})).catch((function(e){a([]),console.log(e.response)})),i.Z.get("/order").then((function(e){})).catch((function(e){console.log(e.response)})),i.Z.get("/users/me").then((function(e){g(e.data.data.user)})).catch((function(e){g({}),(0,s.c4)("/login"),console.log(e.response)})),i.Z.get("/users/cart").then((function(e){return h(e.data.data.cart)})).catch((function(e){h([]),console.log(e.response)}))}),[]),o.createElement("div",{className:"div h-screen bg-gray-100"},o.createElement("div",{className:"h-full w-full flex tab-port:flex-col"},o.createElement("div",{className:"w-full h-full bg-gray-100 py-6 px-3 "},o.createElement("div",{className:"flex items-center font-light"},o.createElement(s.rU,{to:"/shop"},o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"}))),o.createElement("button",null,o.createElement(s.rU,{to:"/shop"},"Back to cart"))),o.createElement("span",{className:"mt-3 block"},"Shipping address "),o.createElement("div",null,null==b?void 0:b.address.map((function(e,t){return o.createElement("div",{key:t,className:"w-full h-10  flex items-center justify-between px-2 bg-white shadow-sm mt-3"},o.createElement("div",{className:"flex space-x-2 items-center"},o.createElement("div",{className:"rounded-full h-4 w-4 border-2 border-gray-700 "}),o.createElement("div",{className:"text-sm truncate text-gray-500 "},e)),o.createElement("div",{className:"flex space-x-2  "},o.createElement(s.rU,{to:"/profile",className:"text-sm text-purple-600 block"}," Edit")))})),o.createElement("div",{className:"w-full py-1  justify-between px-2 bg-white shadow-sm mt-3"},o.createElement("div",{className:"flex  mb-2 pt-2"},o.createElement("input",{type:"checkbox",className:"hidden",onChange:function(e){return p(e.target.checked)},id:"addnew"}),o.createElement("label",{htmlFor:"addnew",className:"rounded-full h-4 w-4 border-2 border-gray-700 flex justify-center items-center p-[1px]"},o.createElement("div",{className:"rounded-full bg-purple-700 h-full w-full "+(u?"":"hidden")})),o.createElement("div",{className:"text-sm truncate text-gray-500 ml-2"},"Add New Address ")),o.createElement("form",{onSubmit:function(){var e=(0,n.Z)(c().mark((function e(t){var a,n,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=[t.target.address.value,t.target.city.value,t.target.state.value,t.target.zip.value].join(" "),e.prev=2,e.next=5,i.Z.patch("users/me",{address:[].concat((0,r.Z)(b.address),[a])});case 5:n=e.sent,g(n.data.data.user),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),console.log(e.t0.response),console.log(null===(l=e.t0.response)||void 0===l?void 0:l.data);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},o.createElement("div",{className:u?"":"hidden"},o.createElement("div",{className:"w-full   mb-2"},o.createElement("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold  mb-1"},"ADDRESS"),o.createElement("input",{id:"address",className:"appearance-none block w-full bg-gray-200 text-gray-700 border focus:border-solid  focus:border-purple-500 rounded py-2 px-4  leading-tight focus:outline-none focus:bg-white",type:"text",placeholder:"street",required:!0})),o.createElement("div",{className:"flex mx-3 mb-2"},o.createElement("div",{className:"w-full md:w-1/3 px-3 mb-3 md:mb-0"},o.createElement("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"grid-city"},"City"),o.createElement("input",{id:"city",className:"appearance-none block w-full bg-gray-200 text-gray-700 focus:border-solid border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white  focus:border-purple-500",type:"text",placeholder:"Vadodara"})),o.createElement("div",{className:"w-full md:w-1/3 px-3 mb-3 md:mb-0"},o.createElement("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"grid-city"},"State"),o.createElement("input",{id:"state",className:"appearance-none block w-full bg-gray-200 text-gray-700 focus:border-solid border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white  focus:border-purple-500 ",type:"text",placeholder:"Gujarat"})),o.createElement("div",{className:"w-full md:w-1/3 px-3 mb-3 md:mb-0"},o.createElement("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"grid-zip"},"Zip"),o.createElement("input",{id:"zip",className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-purple-500 focus:border-solid",type:"text",placeholder:"90210"}))),o.createElement("div",{className:"flex justify-end space-x-5 mr-5 mt-5 mb-4"},o.createElement("button",{className:"bg-transparent hover:bg-purple-500 text-purple-700 font-semibold hover:text-white py-2 px-4 border border-purple-500 hover:border-transparent rounded"},"Reset"),o.createElement("button",{className:"bg-purple-200 hover:bg-purple-500 text-purple-700 font-semibold hover:text-white py-2 px-4 border border-purple-500 rounded"},"Save")))))),o.createElement("div",null,o.createElement("span",{className:"mt-10 block "},"Payment Method  "),o.createElement("div",{className:""},o.createElement("div",{className:"w-full h-10  flex items-center justify-between px-2 bg-white shadow-sm mt-3"},o.createElement("div",{className:"flex space-x-2 items-center"},o.createElement("input",{type:"radio",class:"form-radio h-4 w-4",name:"accountType",value:"personal",id:"offline"}),o.createElement("div",{className:"text-sm truncate text-gray-500 "},"Debit or Credit Card "))),o.createElement("div",{className:"w-full h-10  flex items-center justify-between px-2 bg-white shadow-sm mt-3"},o.createElement("div",{className:"flex space-x-2 items-center"},o.createElement("label",{class:"inline-flex items-center"},o.createElement("input",{type:"radio",className:"form-radio text-purple-400 h-4 w-4",name:"accountType",value:"personal",id:"offline"})),o.createElement("div",{className:"text-sm truncate text-gray-500 "},"Cash On Delivery  ")))))),t?o.createElement("div",{className:"w-2/3 h-full px-4 mt-8 tab-port:w-full"},o.createElement("div",{className:"bg-white w-full py-8 flex flex-col px-3 "},o.createElement("span",{className:""}," Order Summary "),o.createElement("div",{className:"text-sm font-normal  mt-4"},o.createElement("div",{className:"flex justify-between"},o.createElement("div",null,o.createElement("span",null,"Items"),o.createElement("span",null," ():")),o.createElement("span",null,"₹",t.totalPrice||0)),o.createElement("div",{className:"flex justify-between"},o.createElement("div",null,o.createElement("span",null,"Shipping & Handling ")),o.createElement("span",null,"₹23")),o.createElement("div",{className:"flex justify-between"},o.createElement("div",null,o.createElement("span",null,"tax")),o.createElement("span",null,"₹12")),o.createElement("div",{className:"border-2 mx-3 mt-6"}),o.createElement("div",{className:"flex justify-between text-base mt-4"},o.createElement("div",null,o.createElement("span",null,"Total")),o.createElement("span",null,"₹",t.totalPrice+t.totalPrice/10||0))),o.createElement("div",{className:"flex flex-col space-y-2"},o.createElement("button",{className:"bg-purple-400 px-8 py-2 rounded mt-4 text-white",onClick:function(){return E.apply(this,arguments)}},"Place Order"),o.createElement("p",{className:"text-xs font-light text-gray-500"},"By placing your order agree to our company ",o.createElement("span",{className:"underline"},"Privacy policy"),"  and ",o.createElement("span",{className:"underline"},"Conditions of use"))))):o.createElement(o.Fragment,null)))}}}]);
//# sourceMappingURL=component---src-pages-checkout-js-3a857f5965d965619436.js.map